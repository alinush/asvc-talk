\begin{frame}
    \frametitle{KZG Constant-sized Polynomial Commitments \cite{KZG10a}}

    \pause
    Fix $n$-SDH \alert{public parameters} $\left(g^{\tau^i}\right)_{0\le i \le n}$ such that \alert{trapdoor} $\tau\in \Fp$ is unknown.\pause

    \textbf{Committing:} Given $\phi\in \Fp[X]$\pause, where $\phi(X) = \sum_{i=0}^n \phi_i X^i = \langle \phi_0, \phi_{1}, \dots, \phi_n \rangle$\pause\xspace of degree $\le n$:\pause
    \begin{align}
    \onslide<6->{\cm{\phi} &= g^{\phi(\tau)}}\\
    \onslide<7->{  &= \left(g^{\tau^n}\right)^{\phi_n} \left(g^{\tau^{n-1}}\right)^{\phi_{n-1}} \dots (g^\tau)^{\phi_1} \left(g\right)^{\phi_0} }
    \end{align}
    \pause[8]

    \textbf{\underline{Homomorphism:}} For all field elements $a,b$ and polynomials $\phi(X),\psi(X)$, we have:\pause
    \begin{align}
        \onslide<9->{\cm{a\cdot\phi + b\cdot \psi} &= g^{a\cdot\phi(\tau) + b\cdot \psi(\tau)}}\\
        \onslide<10->{       &= \left(g^{\phi(\tau)}\right)^a \left(g^{\psi(\tau)}\right)^b}\\
        \onslide<11->{       &= \cm{\phi}^a \cm{\psi}^b}
    \end{align}
\end{frame}

% Lagrange interpolation and VCs from Lagrange basis polynomials
%  + Commitment updates
\begin{frame}
    \frametitle{VCs from \mygreen{Lagrange Basis Polynomials}~\cite{CDHK15}}
    \pause
    Represent vector $\vec{v}$ with a polynomial $\phi$ s.t. $\phi(i)=v_i$:\pause\xspace
    \begin{align}
    \label{eq:lagr-interp}
    \onslide<3->{\phi(X)&=\sum_{i=0}^{n-1} v_i \cdot \lagr_i(X)}\\
    \onslide<4->{\lagr_i(X)&= \prod_{\substack{j\in [0,n)\\j\ne i}}\frac{X-j}{i-j}}
    \end{align}
    \pause[5]
    Applying the KZG homomorphism to \cref{eq:lagr-interp}:\pause
    \begin{align}
        \cm{\phi} &= \prod_{i=0}^{n-1} \cm{\lagr_i}^{v_i}
    \end{align}
    \pause
    \textbf{Note:} Public parameters include commitments $\cm{\lagr_i}$.\pause\xspace \textit{Can derive from $g^{\tau^i}$'s.}
\end{frame}

\begin{frame}
    \frametitle{Updating the Digest = Updating Polynomial \& Updating Commitment}
    \pause
    Assume $v_i$ changed to $v_i+\delta_i$.\pause\xspace
    Old polynomial was:
    \begin{align}
    \phi(X)=\sum_{i=0}^{n-1} v_i \cdot \lagr_i(X)
    \end{align}
    \pause
    Updated polynomial will be:
    \begin{align}
    \phi'(X) &= \phi(X) + \delta_i \lagr_i(X)
    \end{align}
    \pause
    Updated commitment will be:
    \begin{align}
    \onslide<5->{\cm{\phi'} &= \cm{\phi} \cdot \cm{\lagr_i}^{\delta_i}}%\\
    %\onslide<6->{   &= g^{\phi(\tau)} \cdot g^{\delta_i \lagr_i(\tau)}}\\
    %\onslide<7->{   &= g^{\phi(\tau) + \delta_i \lagr_i(\tau)} = g^{\phi'(\tau)}}
    \end{align}
    \pause[6]
    \textbf{Thus,} for our purposes, each $\upk_i$ will include $\cm{\lagr_i}$.
\end{frame}

\begin{frame}
    \frametitle{Proof $\pi_i$ for $v_i$ Refresher}
    \pause
    A proof $\pi_i$ for $v_i$ must convince that $\phi(i) = v_i$\pause\xspace$\Leftrightarrow \phi \bmod (X-i) = v_i$.\pause
    \begin{align}
        \onslide<4->{q_i(X) &= \frac{\phi(X)-v_i}{X-i}}\\
        \onslide<5->{\pi_i &= \cm{q_i} = g^{q_i(\tau)}}
    \end{align}
    \pause[6]
    To verify, use \alert{pairings}:\pause
    \begin{align}
    \onslide<7->{e(\cm{\phi} / g^{v_i}, g) &= e(\pi_i, g^{\tau} / g^i)\Leftrightarrow}\\
    %\onslide<8->{e(g^{\phi(\tau)}/g^{v_i}, g) &= e(g^{q_i(\tau)},g^{\tau -i})\Leftrightarrow}\\
    %\onslide<8->{e(g^{\phi(\tau) - v_i}, g) &= e(g,g)^{q_i(\tau)(\tau -i)}\Leftrightarrow}\\
    \onslide<8->{\phi(\tau) - v_i &= q_i(\tau)(\tau -i)}
    \end{align}
    %\pause[10]
    %\textbf{Note:} Verifier needs a \textit{verification key} \vrk consisting of $g^{\tau}$!
\end{frame}